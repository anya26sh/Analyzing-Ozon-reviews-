# Анализ отзывов Ozon
### Ссылка на Flask интерактивный дашборд - https://anshinkorenko.pythonanywhere.com/ 

## Обзор проекта
Этот проект посвящен сбору, очистке, анализу и визуализации отзывов клиентов с платформы Ozon, одного из крупнейших маркетплейсов. Основная цель — создание интерактивного дашборда для исследования трендов отзывов, проведения разведочного анализа данных (EDA) и получения полезных инсайтов. Проект реализован с использованием Python, Flask, Dash и других библиотек, а данные хранятся в формате CSV.

## Участники команды
- **Усатова Полина Петровна (ИСУ: 474382)**  
- **Шинкоренко Анна Андреевна (ИСУ: 468092)**  

### Распределение обязанностей
Проект был равномерно разделен между участниками, каждый из которых внес вклад во все основные этапы:

- **Сбор и парсинг данных**:  
  - Обе участницы совместно работали над логикой парсинга данных с помощью Selenium в `scrape_ozon_reviews.py`.  
  - Усатова Полина: Настроила параметры скрытности Selenium (stealth settings) и подготовила начальную настройку URL.  
  - Шинкоренко Анна: Разработала механизм постепенной прокрутки страниц (gradual scroll) и логику извлечения данных.  

- **Очистка и предобработка данных**:  
  - Обе участницы работали над `data_cleaning.py` для очистки и предобработки сырых данных.  
  - Усатова Полина: Реализовала функции очистки дат (`clean_date`, `clean_published_at`) и извлечения длины текста.  
  - Шинкоренко Анна: Выполнила удаление дубликатов, группировку рейтингов и обработку пропущенных значений.  

- **Анализ данных и EDA**:  
  - Обе участницы внесли вклад в анализ в `data_analysis.ipynb` и интегрировали результаты в дашборды.  
  - Усатова Полина: Провела статистический анализ (например, тепловую карту корреляций, проверку гипотез) и создала визуализации.  
  - Шинкоренко Анна: Исследовала временные закономерности (распределение по часам/дням) и подготовила раздел с инсайтами.  

- **Разработка дашборда**:  
  - Обе участницы работали над интерактивными дашбордами с использованием Flask (`app.py`, `index.html`) и Dash (`dashboard_for_data_analysis.py`).
  - На первом этапе пробовали создать Dash (`dashboard_for_data_analysis.py`), стиль не подхоидил и запустить в Google Colab не получалась.
  - Решили перейти на Flask

- **Документация и тестирование**:  
  - Обе участницы обеспечили полную документацию (этот README) и протестировали код.  
  - Усатова Полина: Написала инструкции по настройке проекта и проверила запуск Flask.  
  - Шинкоренко Анна: Задокументировала зависимости в `requirements.txt` и протестировала интерактивность Dash.  

## Структура проекта
```
Analyzing_Ozon_reviews/
├── .venv/              # Виртуальная среда
├── dashboard/          # Файлы дашборда на Flask и Dash
│   ├── templates/      # HTML-шаблоны
│   │   └── index.html
│   ├── app.py         # Приложение Flask
│   └── dashboard_for_data_analysis.py  # Приложение Dash
├── data/               # Данные
│   ├── cleaned_ozon_reviews_2025-05-12.csv
│   ├── cleaned_ozon_reviews_2025-05-13.csv
│   ├── ozon_reviews_2025-05-12.csv
│   └── ozon_reviews_2025-05-13.csv
├── notebooks/          # Jupyter-ноутбуки
│   ├── data_analysis.ipynb
│   └── data_cleaning.ipynb
├── scripts/            # Скрипты Python
│   ├── data_cleaning.py
│   ├── scrape_ozon_reviews.py
│   └── main.py
├── requirements.txt    # Зависимости проекта
└── README.md           # Документация проекта
```

## Установка и настройка
1. **Клонирование репозитория**:
   ```bash
   git clone https://github.com/anya26sh/Analyzing-Ozon-reviews-
   cd Analyzing-Ozon-reviews-
   ```

2. **Создание виртуальной среды**:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Для Windows: .venv\Scripts\activate
   ```

3. **Установка зависимостей**:
   ```bash
   pip install -r requirements.txt
   ```
   Убедитесь, что у вас установлен `jupyter` для выполнения ноутбуков. Если его нет, установите:
   ```bash
   pip install jupyter nbconvert
   ```

4. **Проверка зависимостей**:
   Убедитесь, что все зависимости из `requirements.txt` установлены корректно. Если возникают ошибки, попробуйте обновить `pip`:
   ```bash
   pip install --upgrade pip
   ```

## Запуск проекта
Проект можно запустить двумя способами: полностью через `main.py` (рекомендуется) или поэтапно, запуская отдельные скрипты.

### Вариант 1: Полный запуск через `main.py`
Скрипт `main.py` автоматизирует выполнение всех этапов проекта: сбор данных, очистку, анализ и запуск дашбордов.

1. **Запуск всех этапов**:
   ```bash
   python scripts/main.py
   ```
   - Скрипт начнет с парсинга данных с Ozon.
   - Затем выполнит очистку данных.
   - После этого запустит анализ данных через Jupyter Notebook (`data_analysis.ipynb`).
   - Наконец, откроет два дашборда: Flask (на порту 5000) и Dash (на порту 8050).

2. **Доступ к дашбордам**:
   - Откройте Flask-дашборд: `http://localhost:5000`
   - Откройте Dash-дашборд: `http://localhost:8050`

3. **Завершение работы**:
   - Нажмите `Ctrl+C` в терминале, чтобы завершить работу дашбордов. Скрипт автоматически закроет процессы.

### Вариант 2: Поэтапный запуск
Если вы хотите запустить этапы отдельно, выполните следующие шаги:

1. **Сбор данных**:
   ```bash
   python scripts/scrape_ozon_reviews.py
   ```
   - Этот скрипт собирает отзывы с указанного URL на Ozon и сохраняет их в `data/ozon_reviews_<дата>.csv`.
   - Примечание: Скрипт требует ручного ввода (`input("Next")`) для продолжения прокрутки страницы. Убедитесь, что вы взаимодействуете с терминалом.

2. **Очистка данных**:
   ```bash
   python scripts/data_cleaning.py
   ```
   - Скрипт загружает последний сырой файл из `data/`, очищает данные и сохраняет результат в `data/cleaned_ozon_reviews_<дата>.csv`.

3. **Анализ данных**:
   ```bash
   jupyter nbconvert --to notebook --execute --inplace notebooks/data_analysis.ipynb
   ```
   - Этот шаг выполняет анализ данных в Jupyter Notebook и обновляет `data_analysis.ipynb` с результатами.
   - Альтернативно, вы можете открыть ноутбук вручную:
     ```bash
     jupyter notebook notebooks/data_analysis.ipynb
     ```
     И выполнить ячейки вручную.

4. **Запуск Flask-дашборда**:
   ```bash
   python dashboard/app.py
   ```
   - Дашборд будет доступен по адресу `http://localhost:5000`.

5. **Запуск Dash-дашборда**:
   ```bash
   python dashboard/dashboard_for_data_analysis.py
   ```
   - Дашборд будет доступен по адресу `http://localhost:8050`.

### Примечания по запуску
- **Зависимости для Selenium**: Убедитесь, что у вас установлен ChromeDriver, совместимый с вашей версией Google Chrome, для работы `scrape_ozon_reviews.py`.
- **Порты**: Если порты 5000 или 8050 заняты, измените их в соответствующих файлах (`app.py` и `dashboard_for_data_analysis.py`).
- **Данные**: Если папка `data/` пуста, начните с этапа сбора данных, чтобы создать файлы с отзывами.
- **Jupyter Notebook**: Для анализа через `main.py` требуется `nbconvert`. Если возникают ошибки, установите его отдельно (`pip install nbconvert`).

## Использование
- **Flask-дашборд** (`app.py`, `index.html`): Обновляется в реальном времени каждую минуту, поддерживает фильтры по диапазону дат и категории.
- **Dash-дашборд** (`dashboard_for_data_analysis.py`): Предоставляет интерактивные вкладки: Главная, Данные, EDA, Тренды и Выводы.
- **Jupyter Notebook** (`data_analysis.ipynb`): Используйте для углубленного анализа и визуализаций.

## Возможности
- **Сбор данных**: Парсинг отзывов с Ozon с помощью Selenium.
- **Очистка данных**: Обработка дат, дубликатов и пропущенных значений.
- **EDA**: Анализ типов столбцов, пропущенных данных и числовых статистик.
- **Визуализация**: Гистограммы, линейные графики, круговые диаграммы и тепловые карты.
- **Инсайты**: Выявление трендов (например, пики активности вечером) и рекомендации.

## Зависимости
- `pandas~=2.2.3`
- `plotly~=6.0.1`
- `dash~=3.0.4`
- `numpy~=2.2.5`
- `selenium~=4.32.0`
- `Flask~=3.0.3`
- `APScheduler~=3.11.0`

## Лицензия
Проект создан исключительно в образовательных целях.
